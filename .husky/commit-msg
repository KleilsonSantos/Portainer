#!/bin/sh
echo ""
echo "ğŸŒŸ Validando mensagem de commit! âœï¸"

# Definir regex para validar mensagens de commit
REGEX="^([ğŸ‰âœ¨ğŸš€ğŸ›ğŸ’„ğŸ“¦ğŸ”§ğŸ“ğŸ“šğŸ§ªğŸ”’ğŸ’¥ğŸ”¥ğŸ¨â™»ï¸ğŸ§¹ğŸ’¬ğŸŒâš™ï¸âœ…ğŸ”–ğŸ”âªâ©ğŸ“ˆğŸ“‰ğŸŒ±ğŸ‘·ğŸš§ğŸ”ğŸ”§ğŸ§ªğŸ—ƒï¸ğŸ—‘ï¸âš ï¸â™¿ï¸ğŸ”‡ğŸ”ŠğŸ”„ğŸ› ï¸ğŸ“¤ğŸ“¥ğŸ“…ğŸ—“ï¸])*\s?(feat|fix|docs|style|refactor|test|chore|perf|ci|build|revert)(\([a-zA-Z0-9_-]+\))?: .{5,}$"


# Capturar a mensagem de commit
MESSAGE=$(cat "$1")

# Validar a mensagem de commit
if ! echo "$MESSAGE" | grep -Eq "$REGEX"; then
  echo "âŒ Mensagem de commit invÃ¡lida!"
  echo "ğŸ” Certifique-se de seguir este formato:"
  echo "   feat: DescriÃ§Ã£o clara do recurso (exemplo)"
  echo "   fix: DescriÃ§Ã£o do erro corrigido (exemplo)"
  echo "ğŸ“ ObservaÃ§Ã£o: A mensagem deve ter pelo menos 5 caracteres apÃ³s o tipo."
  exit 1
fi

echo "âœ… Mensagem de commit validada com sucesso! ğŸš€"
echo "ğŸ”„ Continuando com o commit..."